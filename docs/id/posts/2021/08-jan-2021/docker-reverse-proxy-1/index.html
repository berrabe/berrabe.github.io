<!doctype html><html lang=id dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker Reverse Proxy #1 | Docs | berrabe</title><meta name=keywords content="Docker,Linux,Automation"><meta name=description content="1) TLDR  tet tet tetttt &mldr; balek lagi sama saya, berrabe &mldr; dimana saya suka memecahkan masalah tanpa masalah &mldr; YEAY 😎
kali ini, saya pengen curhat dikit tentang jiwa kere hore saya &mldr;. 😅
Jadi saya punya beberapa WEB-APP yang mau di jalanin, katakanlah ada Wordpress, Grafana dll &mldr; tapi saya ga mau jalanin WEB-APP tadi di server-server terpisah kaya gini nih
+-------------------------+ | | +----------> | SERVER 1 (WordPress) | | | | +--------------+ | +-------------------------+ +--------+ | | | | USER | +------> | INTERNET | +-+ +--------+ | | | +-------------------------+ +--------------+ | | | +----------> | SERVER 2 (GRAFANA) | | | +-------------------------+ saya mau nya yangggg &mldr; paket hematttt kere hore ala anak kostan setiap akhir bulan, yang kalo makan nasi nya satu ember tapi lauknya cuman tempe goreng secuil 😩"><meta name=author content="berrabe"><link rel=canonical href=https://berrabe.github.io/id/posts/2021/08-jan-2021/docker-reverse-proxy-1/><link href=https://berrabe.github.io/assets/css/stylesheet.min.b6e4fb9d9486ee9750cbbe1b4e388ff4332a2d1e0d17ab3592ecb6c6f7ba1157.css integrity="sha256-tuT7nZSG7pdQy74bTjiP9DMqLR4NF6s1kuy2xve6EVc=" rel="preload stylesheet" as=style><link rel=icon href=https://berrabe.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://berrabe.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://berrabe.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://berrabe.github.io/apple-touch-icon.png><link rel=mask-icon href=https://berrabe.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-187127468-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="Docker Reverse Proxy #1"><meta property="og:description" content="1) TLDR  tet tet tetttt &mldr; balek lagi sama saya, berrabe &mldr; dimana saya suka memecahkan masalah tanpa masalah &mldr; YEAY 😎
kali ini, saya pengen curhat dikit tentang jiwa kere hore saya &mldr;. 😅
Jadi saya punya beberapa WEB-APP yang mau di jalanin, katakanlah ada Wordpress, Grafana dll &mldr; tapi saya ga mau jalanin WEB-APP tadi di server-server terpisah kaya gini nih
+-------------------------+ | | +----------> | SERVER 1 (WordPress) | | | | +--------------+ | +-------------------------+ +--------+ | | | | USER | +------> | INTERNET | +-+ +--------+ | | | +-------------------------+ +--------------+ | | | +----------> | SERVER 2 (GRAFANA) | | | +-------------------------+ saya mau nya yangggg &mldr; paket hematttt kere hore ala anak kostan setiap akhir bulan, yang kalo makan nasi nya satu ember tapi lauknya cuman tempe goreng secuil 😩"><meta property="og:type" content="article"><meta property="og:url" content="https://berrabe.github.io/id/posts/2021/08-jan-2021/docker-reverse-proxy-1/"><meta property="og:image" content="https://hackernoon.com/images/ass3ya2.jpg"><meta property="article:published_time" content="2021-01-23T11:36:29+07:00"><meta property="article:modified_time" content="2021-01-23T11:36:29+07:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hackernoon.com/images/ass3ya2.jpg"><meta name=twitter:title content="Docker Reverse Proxy #1"><meta name=twitter:description content="1) TLDR  tet tet tetttt &mldr; balek lagi sama saya, berrabe &mldr; dimana saya suka memecahkan masalah tanpa masalah &mldr; YEAY 😎
kali ini, saya pengen curhat dikit tentang jiwa kere hore saya &mldr;. 😅
Jadi saya punya beberapa WEB-APP yang mau di jalanin, katakanlah ada Wordpress, Grafana dll &mldr; tapi saya ga mau jalanin WEB-APP tadi di server-server terpisah kaya gini nih
+-------------------------+ | | +----------> | SERVER 1 (WordPress) | | | | +--------------+ | +-------------------------+ +--------+ | | | | USER | +------> | INTERNET | +-+ +--------+ | | | +-------------------------+ +--------------+ | | | +----------> | SERVER 2 (GRAFANA) | | | +-------------------------+ saya mau nya yangggg &mldr; paket hematttt kere hore ala anak kostan setiap akhir bulan, yang kalo makan nasi nya satu ember tapi lauknya cuman tempe goreng secuil 😩"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker Reverse Proxy #1","name":"Docker Reverse Proxy #1","description":"1) TLDR  tet tet tetttt \u0026amp;hellip; balek lagi sama saya, berrabe \u0026amp;hellip; dimana saya suka memecahkan masalah tanpa masalah \u0026amp;hellip; YEAY 😎\nkali ini, saya pengen curhat dikit tentang …","keywords":["Docker","Linux","Automation"],"articleBody":"  1) TLDR  tet tet tetttt … balek lagi sama saya, berrabe … dimana saya suka memecahkan masalah tanpa masalah … YEAY 😎\nkali ini, saya pengen curhat dikit tentang jiwa kere hore saya …. 😅\nJadi saya punya beberapa WEB-APP yang mau di jalanin, katakanlah ada Wordpress, Grafana dll … tapi saya ga mau jalanin WEB-APP tadi di server-server terpisah kaya gini nih\n+-------------------------+ | | +---------- | SERVER 1 (WordPress) | | | | +--------------+ | +-------------------------+ +--------+ | | | | USER | +------ | INTERNET | +-+ +--------+ | | | +-------------------------+ +--------------+ | | | +---------- | SERVER 2 (GRAFANA) | | | +-------------------------+ saya mau nya yangggg … paket hematttt kere hore ala anak kostan setiap akhir bulan, yang kalo makan nasi nya satu ember tapi lauknya cuman tempe goreng secuil 😩\npokoknya saya mau yang gimana caranya, semua WEB-APP yang buanyak tadi muat dalam satu server, dan AKTIF SEMUA\n+-------------------------+ | SERVER 1 | +--------------+ | | +--------+ | | | = WordPress | | USER | +------ | INTERNET | +------- | = PHPMyAdmin | +--------+ | | | = Grafana | +--------------+ | = dst | | | +-------------------------+ dan jugaaaa, per aplikasi ini di bedakan per domain, bukan per port …. ingat ya, per DOMAIN, jadi wordpress di wp.berrabe.com dan grafana di dash.berrabe.com\nUda kere, banyak mau nya pulakk 😑 … huufttt 😪\ntapi seperti biasaaa, tetap panik dan jangan tenang, karna berrabe selalu tidak punya solusi YEAY 😎\n   2) Reverse Proxy … Gebetan Yang Terlupakan  Setelah bertapa selama 1 jam di depan laptop, akhirnya saya ketemu dan kenalan ama gebetan baru saya reverse proxy 😅 … ni saya kasih fotonya\nhhmm … hhmm … hhmm … 😱\nsepertinya saya mulai jatuh cinta … eh, paham maksudnya 😅 … kalau di lihat dari gambar, dalam satu server bisa di letakkan 2 website yang berbeda dengan di kasih reverse-proxy di depannya\nbtw, gambarnya kalo di lihat malah kayak cinta segitiga 😂\n   3) PDKT Sama Gebetan Baruuu  kayaknya bakal seru nih mainan ama gebetan reverse-proxy, hehe 😍\nperlu di ingat, semua teknologi ini berbasis docker … baik reverse-proxy maupun webapps / upstream server nya, jadi pastikan uda paham apa itu docker dan istilah2 di dalamnya\nnah, gambaran jelasnya akan seperti ini\n 3.a) Persiapan Nembak Gebetan sebelum menggunakan reverse proxy, pastikan sudah ada otak nya dulu .. yaitu docker, cara install nya sangattttt mudahhh\n curl -fsSL https://get.docker.com -o get-docker.sh  sh get-docker.sh  systemctl start docker  3.b) Setup Env okeh, supaya mudah dalam maintenance kedepannya … maka lebih baik di buat folder hirarki berstruktur seperti di bawah\nReverse_Proxy/ ├── auto_net.brb ├── docker-compose.yml tidak semua file akan di isi langsung, bertahap … karna artikel ini akan puanjang 😱\n   4) Compose File != Surat Cinta  setelah selesai membuat struktur folder, saat nya mengisi file-file yang telah di buat … copy config di bawah ke file docker-compose.yml\nversion: \"2.2\" services: reverse-proxy: image: jwilder/nginx-proxy:alpine container_name: reverse-proxy volumes: - /var/run/docker.sock:/tmp/docker.sock:ro - ./reverse-proxy/cert:/etc/nginx/certs - ./reverse-proxy/vhost.d:/etc/nginx/vhost.d - ./reverse-proxy/html:/usr/share/nginx/html - ./reverse-proxy/dhparam:/etc/nginx/dhparam - ./conf/my_proxy.conf:/etc/nginx/conf.d/my_proxy.conf:ro ports: - \"80:80\" - \"443:443\" environment: - HTTPS_METHOD=noredirect - DEFAULT_HOST=example.com restart: unless-stopped cpus: 1 mem_limit: 100M memswap_limit: 100M network_mode: bridge reverse-proxy-letencrypt: image: jrcs/letsencrypt-nginx-proxy-companion container_name: reverse-proxy-letencrypt volumes_from: - reverse-proxy volumes: - /var/run/docker.sock:/var/run/docker.sock:ro - ./reverse-proxy/acme:/etc/acme.sh environment: - DEFAULT_EMAIL=xxx@example.com depends_on: - reverse-proxy restart: unless-stopped cpus: 1 mem_limit: 100M memswap_limit: 100M network_mode: bridge ⚠️ Note : Oiya, jangan lupa ganti beberapa value yang ada kata example.com ke domain yang sudah di sediakan\n   5) Jalanin Aja Dulu  menjalankan docker-compose reverse-proxy ini sangat mudah … tidak seperti menjalankan hubungan yang tidak pasti 😞\n docker-compose up -d Starting reverse-proxy ... done Starting reverse-proxy-letencrypt ... done untuk melihat status container nya, apakah sudah up / restart gegara ada error\n docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 67627ced6c7e jrcs/letsencrypt-nginx-proxy-companion \"/bin/bash /app/entr…\" 3 seconds ago Up 2 seconds reverse-proxy-letencrypt 59f8fc51bfbc jwilder/nginx-proxy:alpine \"/app/docker-entrypo…\" 21 seconds ago Up 2 seconds 0.0.0.0:80-80/tcp, 0.0.0.0:443-443/tcp reverse-proxy    6) Testing  untuk testing, pastikan sudah punya domain sendiri … contoh nya di sini berrabe.com yang di pointing ke ip server 1.2.3.4 … jangan lupa, server nya yang sudah ada reverse-proxy nya\n1. berrabe.com ---- 1.2.3.4 2. a.berrabe.com ---- 1.2.3.4 3. b.berrabe.com ---- 1.2.3.4 setelah di pastikan domain sudah ada dan resolved dengan benar ke ip server, jalankan web server sederhana untuk mengecek apakah reverse-proxy sudah berjalan dengan semestinya\n docker run -d \\  --name web \\  -e VIRTUAL_HOST=a.berrabe.com \\  -e LETSENCRYPT_HOST=a.berrabe.com \\  nginx:alpine untuk melihat apakah ada error saat proses auto-generated conf dan ssl certs berjalan, bisa di lihat pakai command\n docker-compose logs -f seharusnya docker-reverse-proxy yang tadi di jalankan menggunakan compose mendeteksi adanya container nginx:alpine diatas dan otomatis men-generated conf untuk nginx dan validasi ssl certs\ndannn … tadaaa, reverse-proxy bisa di gunakan\n curl -s -I http://a.berrabe.com | head -n 1 HTTP/1.1 200 OK  curl -s -I https://a.berrabe.com | head -n 1 HTTP/2 302 ⚠️ Note : agar reverse-proxy berhasil, pastikan antara container reverse-proxy dan container upstream harus dalam satu network (default bridge) … lihat di sini\n   7) Untuk Yang Kepo  untuk yang kepo bagaimana cara kerja docker ini\n pertama, kita menjalankan docker reverse-proxy menggunakan docker-compose … yang akan menciptakan 2 container, yaitu reverse-proxy dan reverse-proxy-letencrypt  reverse-proxy untuk auto-gen conf dan handle nginx reverse proxy lewat proxy pass reverse-proxy-letencrypt untuk auto-gen dan validasi SSL Certs   setelah 2 container RP tadi berjalan, saat nya menjalankan WEB-APP / Upstream Server (contoh: nginx:alpine) saat WEB-APP berjalan dan status nya UP, maka 2 container RP tadi tau kalau ada container baru, gimana bisa tahu? karna dia komunikasi dengan docker.sock jika container baru yang sudah UP tadi terdapat 2 environment variable seperti VIRTUAL_HOST dan LETSENCRYPT_HOST, maka 2 container RP akan men-generated conf sesuai dengan :  VIRTUAL_HOST untuk generated domain mapping ke nginx conf, terdapat di /etc/nginx/conf.d/default.conf pada container reverse-proxy LETSENCRYPT_HOST untuk generated dan validasi SSL Certs domain menggunakan letsencrypt       8) Peringatan  Agar reverse-proxy ini bekerja, pastikan antara container reverse-proxy dan container upstream (contoh: nginx-alpine) berada dalam satu network (default bridge) … jika semisal upstream di jalan kan sebagai docker-compose up yang biasanya akan otomatis auto generated nama network sendiri, maka container reverse-proxy tadi harus di masukkan ke network tersebut … artikel nya ada di docker reverse proxy #2\njika yang ndak mau repot-repot copy paste script di atas, tinggal clone github saya di sini\n","wordCount":"1043","inLanguage":"id","image":"https://hackernoon.com/images/ass3ya2.jpg","datePublished":"2021-01-23T11:36:29+07:00","dateModified":"2021-01-23T11:36:29+07:00","author":{"@type":"Person","name":"berrabe"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://berrabe.github.io/id/posts/2021/08-jan-2021/docker-reverse-proxy-1/"},"publisher":{"@type":"Organization","name":"Docs | berrabe","logo":{"@type":"ImageObject","url":"https://berrabe.github.io/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://berrabe.github.io/id/ accesskey=h title="Docs | berrabe (Alt + H)">Docs | berrabe</a>
<span class=logo-switches><span class=theme-toggle title="(Alt + T)"><a id=theme-toggle accesskey=t><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span><span class=lang-switch><span>|</span><ul><li><a href=https://berrabe.github.io/ title=English aria-label=English>English</a></li></ul></span></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://berrabe.github.io/id/tags title=Tag><span>Tag</span></a></li><li><a href=https://berrabe.github.io/id/archives/ title=Arsip><span>Arsip</span></a></li><li><a href=https://berrabe.github.io/id/search/ title=Cari><span>Cari</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Docker Reverse Proxy #1</h1><div class=post-meta>January 23, 2021&nbsp;·&nbsp;5 min&nbsp;·&nbsp;berrabe</div></header><figure class=entry-cover><img src=https://hackernoon.com/images/ass3ya2.jpg alt="Loh Imange Nya Ilang"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><blockquote><ul><li><a href=#1-tldr aria-label="1) TLDR">1) TLDR</a></li><li><a href=#2-reverse-proxy--gebetan-yang-terlupakan aria-label="2) Reverse Proxy &amp;hellip; Gebetan Yang Terlupakan">2) Reverse Proxy &mldr; Gebetan Yang Terlupakan</a></li><li><a href=#3-pdkt-sama-gebetan-baruuu aria-label="3) PDKT Sama Gebetan Baruuu">3) PDKT Sama Gebetan Baruuu</a><ul><li><a href=#3a-persiapan-nembak-gebetan aria-label="3.a) Persiapan Nembak Gebetan">3.a) Persiapan <del>Nembak Gebetan</del></a></li><li><a href=#3b-setup-env aria-label="3.b) Setup Env">3.b) Setup Env</a></li></ul></li><li><a href=#4-compose-file--surat-cinta aria-label="4) Compose File != Surat Cinta">4) Compose File != Surat Cinta</a></li><li><a href=#5-jalanin-aja-dulu aria-label="5) Jalanin Aja Dulu">5) Jalanin Aja Dulu</a></li><li><a href=#6-testing aria-label="6) Testing">6) Testing</a></li><li><a href=#7-untuk-yang-kepo aria-label="7) Untuk Yang Kepo">7) Untuk Yang Kepo</a></li><li><a href=#8-peringatan aria-label="8) Peringatan">8) Peringatan</a></li></ul></blockquote></details></div><div class=post-content><p> </p><p> </p><h2 id=1-tldr>1) TLDR<a hidden class=anchor aria-hidden=true href=#1-tldr>#</a></h2><hr><p>tet tet tetttt &mldr; balek lagi sama saya, <strong>berrabe</strong> &mldr; dimana saya suka memecahkan masalah tanpa masalah &mldr; YEAY 😎</p><p>kali ini, saya pengen curhat dikit tentang jiwa kere hore saya &mldr;. 😅</p><p>Jadi saya punya beberapa <strong>WEB-APP</strong> yang mau di jalanin, katakanlah ada Wordpress, Grafana dll &mldr; tapi saya ga mau jalanin <strong>WEB-APP</strong> tadi di server-server terpisah kaya gini nih</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>                                                       +-------------------------+
                                                       |                         |
                                          +----------&gt; |  SERVER <span style=color:#ae81ff>1</span> <span style=color:#f92672>(</span>WordPress<span style=color:#f92672>)</span>   |
                                          |            |                         |
                      +--------------+    |            +-------------------------+
+--------+            |              |    |
|  USER  |  +------&gt;  |   INTERNET   |  +-+
+--------+            |              |    |            +-------------------------+
                      +--------------+    |            |                         |
                                          +----------&gt; |    SERVER <span style=color:#ae81ff>2</span> <span style=color:#f92672>(</span>GRAFANA<span style=color:#f92672>)</span>   |
                                                       |                         |
                                                       +-------------------------+
</code></pre></div><p>saya mau nya yangggg &mldr; paket hematttt kere hore ala anak kostan setiap akhir bulan, yang kalo makan nasi nya satu ember tapi lauknya cuman tempe goreng secuil 😩</p><p>pokoknya saya mau yang gimana caranya, semua <strong>WEB-APP</strong> yang buanyak tadi muat dalam satu server, dan <strong>AKTIF SEMUA</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>                                                  +-------------------------+
                                                  |        SERVER <span style=color:#ae81ff>1</span>         |
                      +--------------+            |                         |
+--------+            |              |            |     <span style=color:#f92672>=</span> WordPress         |
|  USER  |  +------&gt;  |   INTERNET   | +-------&gt;  |     <span style=color:#f92672>=</span> PHPMyAdmin        |
+--------+            |              |            |     <span style=color:#f92672>=</span> Grafana           |
                      +--------------+            |     <span style=color:#f92672>=</span> dst               |
                                                  |                         |
                                                  +-------------------------+
</code></pre></div><p>dan jugaaaa, per aplikasi ini di bedakan per domain, bukan per port &mldr;. <strong>ingat ya, per DOMAIN</strong>, jadi wordpress di <code>wp.berrabe.com</code> dan grafana di <code>dash.berrabe.com</code></p><p>Uda kere, banyak mau nya pulakk 😑 &mldr; huufttt 😪</p><p>tapi seperti biasaaa, tetap panik dan jangan tenang, karna <strong>berrabe</strong> selalu tidak punya solusi YEAY 😎</p><p> </p><p> </p><p> </p><h2 id=2-reverse-proxy--gebetan-yang-terlupakan>2) Reverse Proxy &mldr; Gebetan Yang Terlupakan<a hidden class=anchor aria-hidden=true href=#2-reverse-proxy--gebetan-yang-terlupakan>#</a></h2><hr><p>Setelah bertapa selama 1 jam di depan laptop, akhirnya saya ketemu dan kenalan ama <del>gebetan baru saya</del> reverse proxy 😅 &mldr; ni saya kasih fotonya</p><p><img src=https://miro.medium.com/max/2800/1*rnzxfcy2N_ffJPnBundJQw.jpeg alt="reverse proxy"></p><p>hhmm &mldr; hhmm &mldr; hhmm &mldr; 😱</p><p>sepertinya saya mulai jatuh cinta &mldr; eh, paham maksudnya 😅 &mldr; kalau di lihat dari gambar, dalam satu server bisa di letakkan 2 website yang berbeda dengan di kasih <strong>reverse-proxy</strong> di depannya</p><p>btw, gambarnya kalo di lihat malah kayak cinta segitiga 😂</p><p> </p><p> </p><p> </p><h2 id=3-pdkt-sama-gebetan-baruuu>3) PDKT Sama Gebetan Baruuu<a hidden class=anchor aria-hidden=true href=#3-pdkt-sama-gebetan-baruuu>#</a></h2><hr><p>kayaknya bakal seru nih mainan ama <del>gebetan</del> reverse-proxy, hehe 😍</p><p>perlu di ingat, semua teknologi ini berbasis docker &mldr; baik reverse-proxy maupun webapps / upstream server nya, jadi pastikan uda paham apa itu docker dan istilah2 di dalamnya</p><p><img src=https://miro.medium.com/max/875/1*UDJaoKU3Foiz6KhfWI1eOA.png alt="docker reverse proxy"></p><p>nah, gambaran jelasnya akan seperti ini</p><p> </p><h3 id=3a-persiapan-nembak-gebetan>3.a) Persiapan <del>Nembak Gebetan</del><a hidden class=anchor aria-hidden=true href=#3a-persiapan-nembak-gebetan>#</a></h3><p>sebelum menggunakan reverse proxy, pastikan sudah ada otak nya dulu .. yaitu <strong>docker</strong>, cara install nya sangattttt mudahhh</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>&gt; curl -fsSL https://get.docker.com -o get-docker.sh
&gt; sh get-docker.sh
&gt; systemctl start docker
</code></pre></div><p> </p><h3 id=3b-setup-env>3.b) Setup Env<a hidden class=anchor aria-hidden=true href=#3b-setup-env>#</a></h3><p>okeh, supaya mudah dalam maintenance kedepannya &mldr; maka lebih baik di buat folder hirarki berstruktur seperti di bawah</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>Reverse_Proxy/
   ├──  auto_net.brb  
   ├──  docker-compose.yml
</code></pre></div><p>tidak semua file akan di isi langsung, bertahap &mldr; karna artikel ini akan puanjang 😱</p><p> </p><p> </p><p> </p><h2 id=4-compose-file--surat-cinta>4) Compose File != Surat Cinta<a hidden class=anchor aria-hidden=true href=#4-compose-file--surat-cinta>#</a></h2><hr><p>setelah selesai membuat struktur folder, saat nya mengisi file-file yang telah di buat &mldr; copy config di bawah ke file <code>docker-compose.yml</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;2.2&#34;</span>

<span style=color:#f92672>services</span>:
    <span style=color:#f92672>reverse-proxy</span>:
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>jwilder/nginx-proxy:alpine</span>
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>reverse-proxy</span>
        <span style=color:#f92672>volumes</span>:
            - <span style=color:#ae81ff>/var/run/docker.sock:/tmp/docker.sock:ro</span>
            - <span style=color:#ae81ff>./reverse-proxy/cert:/etc/nginx/certs</span>
            - <span style=color:#ae81ff>./reverse-proxy/vhost.d:/etc/nginx/vhost.d</span>
            - <span style=color:#ae81ff>./reverse-proxy/html:/usr/share/nginx/html</span>
            - <span style=color:#ae81ff>./reverse-proxy/dhparam:/etc/nginx/dhparam</span>
            - <span style=color:#ae81ff>./conf/my_proxy.conf:/etc/nginx/conf.d/my_proxy.conf:ro</span>
        <span style=color:#f92672>ports</span>:
            - <span style=color:#e6db74>&#34;80:80&#34;</span>
            - <span style=color:#e6db74>&#34;443:443&#34;</span>
        <span style=color:#f92672>environment</span>:
            - <span style=color:#ae81ff>HTTPS_METHOD=noredirect</span>
            - <span style=color:#ae81ff>DEFAULT_HOST=example.com</span>
        <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
        <span style=color:#f92672>cpus</span>: <span style=color:#ae81ff>1</span>
        <span style=color:#f92672>mem_limit</span>: <span style=color:#ae81ff>100M</span>
        <span style=color:#f92672>memswap_limit</span>: <span style=color:#ae81ff>100M</span>
        <span style=color:#f92672>network_mode</span>: <span style=color:#ae81ff>bridge</span>

    <span style=color:#f92672>reverse-proxy-letencrypt</span>:
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>jrcs/letsencrypt-nginx-proxy-companion</span>
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>reverse-proxy-letencrypt</span>
        <span style=color:#f92672>volumes_from</span>:
            - <span style=color:#ae81ff>reverse-proxy</span>
        <span style=color:#f92672>volumes</span>:
            - <span style=color:#ae81ff>/var/run/docker.sock:/var/run/docker.sock:ro</span>
            - <span style=color:#ae81ff>./reverse-proxy/acme:/etc/acme.sh</span>
        <span style=color:#f92672>environment</span>:        
            - <span style=color:#ae81ff>DEFAULT_EMAIL=xxx@example.com</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>reverse-proxy</span>
        <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
        <span style=color:#f92672>cpus</span>: <span style=color:#ae81ff>1</span>
        <span style=color:#f92672>mem_limit</span>: <span style=color:#ae81ff>100M</span>
        <span style=color:#f92672>memswap_limit</span>: <span style=color:#ae81ff>100M</span>
        <span style=color:#f92672>network_mode</span>: <span style=color:#ae81ff>bridge</span>
</code></pre></div><p>⚠️ <strong>Note</strong> : Oiya, jangan lupa ganti beberapa value yang ada kata <code>example.com</code> ke domain yang sudah di sediakan</p><p> </p><p> </p><p> </p><h2 id=5-jalanin-aja-dulu>5) Jalanin Aja Dulu<a hidden class=anchor aria-hidden=true href=#5-jalanin-aja-dulu>#</a></h2><hr><p>menjalankan docker-compose reverse-proxy ini sangat mudah &mldr; tidak seperti menjalankan hubungan yang tidak pasti 😞</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>&gt; docker-compose up -d

Starting reverse-proxy ... <span style=color:#66d9ef>done</span>
Starting reverse-proxy-letencrypt ... <span style=color:#66d9ef>done</span>
</code></pre></div><p>untuk melihat status container nya, apakah sudah up / restart gegara ada error</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>&gt; docker ps -a

CONTAINER ID   IMAGE                                    COMMAND                  CREATED          STATUS         PORTS                                      NAMES
67627ced6c7e   jrcs/letsencrypt-nginx-proxy-companion   <span style=color:#e6db74>&#34;/bin/bash /app/entr…&#34;</span>   <span style=color:#ae81ff>3</span> seconds ago    Up <span style=color:#ae81ff>2</span> seconds                                              reverse-proxy-letencrypt
59f8fc51bfbc   jwilder/nginx-proxy:alpine               <span style=color:#e6db74>&#34;/app/docker-entrypo…&#34;</span>   <span style=color:#ae81ff>21</span> seconds ago   Up <span style=color:#ae81ff>2</span> seconds   0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp   reverse-proxy
</code></pre></div><p> </p><p> </p><p> </p><h2 id=6-testing>6) Testing<a hidden class=anchor aria-hidden=true href=#6-testing>#</a></h2><hr><p>untuk testing, pastikan sudah punya domain sendiri &mldr; contoh nya di sini <code>berrabe.com</code> yang di pointing ke ip server <code>1.2.3.4</code> &mldr; jangan lupa, server nya yang sudah ada reverse-proxy nya</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>1. berrabe.com ----&gt; 1.2.3.4
2. a.berrabe.com ----&gt; 1.2.3.4
3. b.berrabe.com ----&gt; 1.2.3.4
</code></pre></div><p>setelah di pastikan domain sudah ada dan resolved dengan benar ke ip server, jalankan web server sederhana untuk mengecek apakah reverse-proxy sudah berjalan dengan semestinya</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>&gt; docker run -d <span style=color:#ae81ff>\ </span>             
        --name web <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        -e VIRTUAL_HOST<span style=color:#f92672>=</span>a.berrabe.com <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        -e LETSENCRYPT_HOST<span style=color:#f92672>=</span>a.berrabe.com <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        nginx:alpine                        
</code></pre></div><p>untuk melihat apakah ada error saat proses auto-generated conf dan ssl certs berjalan, bisa di lihat pakai command</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>&gt; docker-compose logs -f
</code></pre></div><p>seharusnya docker-reverse-proxy yang tadi di jalankan menggunakan compose mendeteksi adanya container <code>nginx:alpine</code> diatas dan otomatis men-generated conf untuk nginx dan validasi ssl certs</p><p>dannn &mldr; tadaaa, reverse-proxy bisa di gunakan</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>&gt; curl -s -I http://a.berrabe.com | head -n <span style=color:#ae81ff>1</span>
HTTP/1.1 <span style=color:#ae81ff>200</span> OK

&gt; curl -s -I https://a.berrabe.com | head -n <span style=color:#ae81ff>1</span>
HTTP/2 <span style=color:#ae81ff>302</span>
</code></pre></div><p>⚠️ <strong>Note</strong> : agar reverse-proxy berhasil, pastikan antara container reverse-proxy dan container upstream harus dalam satu network (default bridge) &mldr; <a href=#8-peringatan>lihat di sini</a></p><p> </p><p> </p><p> </p><h2 id=7-untuk-yang-kepo>7) Untuk Yang Kepo<a hidden class=anchor aria-hidden=true href=#7-untuk-yang-kepo>#</a></h2><hr><p>untuk yang kepo bagaimana cara kerja docker ini</p><ul><li>pertama, kita menjalankan docker reverse-proxy menggunakan docker-compose &mldr; yang akan menciptakan 2 container, yaitu <code>reverse-proxy</code> dan <code>reverse-proxy-letencrypt</code><ul><li><code>reverse-proxy</code> untuk auto-gen conf dan handle nginx reverse proxy lewat proxy pass</li><li><code>reverse-proxy-letencrypt</code> untuk auto-gen dan validasi SSL Certs</li></ul></li><li>setelah 2 container RP tadi berjalan, saat nya menjalankan <strong>WEB-APP</strong> / Upstream Server (contoh: nginx:alpine)</li><li>saat <strong>WEB-APP</strong> berjalan dan status nya UP, maka 2 container RP tadi tau kalau ada container baru, gimana bisa tahu? karna dia komunikasi dengan <code>docker.sock</code></li><li>jika container baru yang sudah UP tadi terdapat 2 environment variable seperti <code>VIRTUAL_HOST</code> dan <code>LETSENCRYPT_HOST</code>, maka 2 container RP akan men-generated conf sesuai dengan :<ul><li><code>VIRTUAL_HOST</code> untuk generated domain mapping ke nginx conf, terdapat di <code>/etc/nginx/conf.d/default.conf</code> pada container <code>reverse-proxy</code></li><li><code>LETSENCRYPT_HOST</code> untuk generated dan validasi SSL Certs domain menggunakan letsencrypt</li></ul></li></ul><p> </p><p> </p><p> </p><h2 id=8-peringatan>8) Peringatan<a hidden class=anchor aria-hidden=true href=#8-peringatan>#</a></h2><hr><p>Agar reverse-proxy ini bekerja, pastikan antara container reverse-proxy dan container upstream (contoh: nginx-alpine) berada dalam satu network (default bridge) &mldr; jika semisal upstream di jalan kan sebagai <code>docker-compose up</code> yang biasanya akan otomatis auto generated nama network sendiri, maka container reverse-proxy tadi harus di masukkan ke network tersebut &mldr; <a href=https://berrabe.github.io/id/posts/2021/09-jan-2021/docker-reverse-proxy-2/>artikel nya ada di docker reverse proxy #2</a></p><p>jika yang ndak mau repot-repot copy paste script di atas, tinggal clone <a href=https://github.com/berrabe/docker-reverse-proxy>github saya di sini</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://berrabe.github.io/id/tags/docker/>Docker</a></li><li><a href=https://berrabe.github.io/id/tags/linux/>Linux</a></li><li><a href=https://berrabe.github.io/id/tags/automation/>Automation</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Docker Reverse Proxy #1 on twitter" href="https://twitter.com/intent/tweet/?text=Docker%20Reverse%20Proxy%20%231&url=https%3a%2f%2fberrabe.github.io%2fid%2fposts%2f2021%2f08-jan-2021%2fdocker-reverse-proxy-1%2f&hashtags=Docker%2cLinux%2cAutomation"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Reverse Proxy #1 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fberrabe.github.io%2fid%2fposts%2f2021%2f08-jan-2021%2fdocker-reverse-proxy-1%2f&title=Docker%20Reverse%20Proxy%20%231&summary=Docker%20Reverse%20Proxy%20%231&source=https%3a%2f%2fberrabe.github.io%2fid%2fposts%2f2021%2f08-jan-2021%2fdocker-reverse-proxy-1%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Reverse Proxy #1 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fberrabe.github.io%2fid%2fposts%2f2021%2f08-jan-2021%2fdocker-reverse-proxy-1%2f&title=Docker%20Reverse%20Proxy%20%231"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zm-119.474 108.193c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zm-160.386-29.702c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Reverse Proxy #1 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fberrabe.github.io%2fid%2fposts%2f2021%2f08-jan-2021%2fdocker-reverse-proxy-1%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Reverse Proxy #1 on whatsapp" href="https://api.whatsapp.com/send?text=Docker%20Reverse%20Proxy%20%231%20-%20https%3a%2f%2fberrabe.github.io%2fid%2fposts%2f2021%2f08-jan-2021%2fdocker-reverse-proxy-1%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23-13.314-11.876-22.304-26.542-24.916-31.026s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Reverse Proxy #1 on telegram" href="https://telegram.me/share/url?text=Docker%20Reverse%20Proxy%20%231&url=https%3a%2f%2fberrabe.github.io%2fid%2fposts%2f2021%2f08-jan-2021%2fdocker-reverse-proxy-1%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47A3.38 3.38.0 0126.49 29.86zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://berrabe.github.io/id/>Docs | berrabe</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=https://berrabe.github.io/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>